syntax = "proto3";

package proto;

option go_package = "github.com/michael-diggin/yass/proto;proto";

service Cache{
    rpc Ping(Null) returns(PingResponse) {}
    rpc Set(Pair) returns(Key){}
    rpc Get(Key) returns(Pair){}
    rpc Delete(Key) returns(Null){}
    rpc SetFollower(Pair) returns(Key){}
    rpc GetFollower(Key) returns(Pair){}
    rpc DeleteFollower(Key) returns(Null){}

    rpc BatchGet(BatchGetRequest) returns(BatchGetResponse){}
    rpc BatchSet(BatchSetRequest) returns(Null){}
}


message Pair {
    string key = 1;
    bytes value = 2;
}

message Key {
    string key = 1;
}

message Null{}

message BatchSetRequest {
    int32 replica = 1;
    repeated Pair data = 2;
}

message BatchGetRequest {
    int32 replica = 1;
}

message BatchGetResponse {
    int32 replica = 1;
    repeated Pair data = 2;
}

message PingResponse{
    enum ServingStatus {
        UNKNOWN = 0;
        SERVING = 1;
        NOT_SERVING = 2;
      }
      ServingStatus status = 1;
}
